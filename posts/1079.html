<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><!-- 百度的html标记--><meta name="baidu-site-verification" content="codeva-bSLYjtWXtR"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>操作系统 | myl's blog</title><meta name="author" content="myl"><meta name="copyright" content="myl"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="bilibili()     function bilibili() {       let dom = document.getElementById('BV19r4y1b7Aw')       fetch('https://api.320.ink/api/b?id=BV19r4y1b7Aw').then(res=>res.json()).then(data=>{">
<meta property="og:type" content="article">
<meta property="og:title" content="操作系统">
<meta property="og:url" content="http://yileman.github.io/posts/1079.html">
<meta property="og:site_name" content="myl's blog">
<meta property="og:description" content="bilibili()     function bilibili() {       let dom = document.getElementById('BV19r4y1b7Aw')       fetch('https://api.320.ink/api/b?id=BV19r4y1b7Aw').then(res=>res.json()).then(data=>{">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://myl-mdimg.oss-cn-beijing.aliyuncs.com/TyporaImg/cover/article_cover10.png">
<meta property="article:published_time" content="2024-04-08T00:00:00.000Z">
<meta property="article:modified_time" content="2024-04-18T13:54:24.127Z">
<meta property="article:author" content="myl">
<meta property="article:tag" content="基础">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://myl-mdimg.oss-cn-beijing.aliyuncs.com/TyporaImg/cover/article_cover10.png"><link rel="shortcut icon" href="https://myl-mdimg.oss-cn-beijing.aliyuncs.com/touxiang.jpg"><link rel="canonical" href="http://yileman.github.io/posts/1079.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="baidu-site-verification" content="codeva-bSLYjtWXtR"><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '操作系统',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-04-18 21:54:24'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/modify.css"><link rel="stylesheet" href="/css/user.css"><link rel="stylesheet" href="/css/rightMenu.css"><link rel="stylesheet" href="/css/iconfont.css"><link rel="stylesheet" href="/css/mouse.css"><link rel="stylesheet" href="https://cdn1.tianli0.top/gh/zhheo/Post-Abstract-AI@0.15.2/tianli_gpt.css"><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css">
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<link rel="stylesheet" href="https://unpkg.com/hexo-butterfly-tag-plugins-plus-chinese@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://unpkg.com/hexo-butterfly-tag-plugins-plus-chinese@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://unpkg.com/hexo-butterfly-tag-plugins-plus-chinese@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.1.1"></head><body><div id="loading-box"><div class="pokeball-back"></div><div class="pokeball-loading"><div class="pokeball" id="pokeball-normal"></div><div class="pokeball" id="pokeball-great"></div><div class="pokeball" id="pokeball-ultra"></div><div class="pokeball" id="pokeball-master"></div><div class="pokeball" id="pokeball-safari"></div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      //- console.log("end")
      $body.style.overflow = 'auto'

      document.getElementById('loading-box').style.transition = 'opacity 3s ease 0s'
      document.getElementById('loading-box').style.opacity = '0'
      setTimeout(function(){
        document.getElementById('loading-box').classList.add("loaded")
      }, 3000);

      //- $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.remove('loaded')
      
    }
  }

  preloader.initLoading()
  //- setTimeout(function(){preloader.endLoading();}, 3000);
  window.addEventListener('load',() => { preloader.endLoading() })
  document.getElementById('loading-box').addEventListener('click',()=> {preloader.endLoading()})

  if (true) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://myl-mdimg.oss-cn-beijing.aliyuncs.com/touxiang.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">22</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><hr class="custom-hr"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fa fa-link"></i><span> 留言板</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://myl-mdimg.oss-cn-beijing.aliyuncs.com/TyporaImg/cover/article_cover10.png')"><nav id="nav"><span id="blog-info"><a href="/" title="myl's blog"><span class="site-name">myl's blog</span></a></span><div id="menus"></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fa fa-link"></i><span> 留言板</span></a></div></div><center id="name-container"><a id="page-name" href="javascript:scrollToTop()">PAGE_NAME</a></center><div id="nav-right"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div id="randomPost"><a class="site-page social-icon search" href="javascript:;" onclick="randomPost()" title="随机访问一篇文章"><i class="fas fa-circle-notch fa-fw"></i></a></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">操作系统</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-04-08T00:00:00.000Z" title="发表于 2024-04-08 08:00:00">2024-04-08</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-04-18T13:54:24.127Z" title="更新于 2024-04-18 21:54:24">2024-04-18</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/study/">study</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="操作系统"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><div class="top-img" style="background-image: url('https://myl-mdimg.oss-cn-beijing.aliyuncs.com/TyporaImg/cover/article_cover10.png');"></div><article class="post-content" id="article-container">
  <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV19r4y1b7Aw/" class="bilibili_box" id="BV19r4y1b7Aw"></a>

  <script>
    bilibili()
    function bilibili() {
      let dom = document.getElementById('BV19r4y1b7Aw')
      fetch('https://api.320.ink/api/b?id=BV19r4y1b7Aw').then(res=>res.json()).then(data=>{
        dom.innerHTML = `
        <div class="bilibili_cover">
          <img src="https://s1.hdslb.com/bfs/static/player/img/play.svg" class="play_icon no-lazyload">
          <img src="${data.pic + '&h=300'}" class="no-lazyload">
          <span>20:37</span>
        </div>
        <div class="bilibili_info">
          <div class="title">${data.title}</div>
          <div class="desc">${data.desc}</div>
          <div class="stat">
            <span><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none" class="icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.67735 4.2798C5.98983 4.1725 7.85812 4.0625 10 4.0625C12.1421 4.0625 14.0105 4.17252 15.323 4.27983C16.2216 4.3533 16.9184 5.04049 16.9989 5.9318C17.0962 7.00837 17.1875 8.43614 17.1875 10C17.1875 11.5639 17.0962 12.9916 16.9989 14.0682C16.9184 14.9595 16.2216 15.6467 15.323 15.7202C14.0105 15.8275 12.1421 15.9375 10 15.9375C7.85812 15.9375 5.98983 15.8275 4.67735 15.7202C3.77861 15.6467 3.08174 14.9593 3.00119 14.0678C2.90388 12.9908 2.8125 11.5627 2.8125 10C2.8125 8.43727 2.90388 7.00924 3.00119 5.93221C3.08174 5.04067 3.77861 4.35327 4.67735 4.2798ZM10 2.8125C7.81674 2.8125 5.9136 2.92456 4.5755 3.03395C3.07738 3.15643 1.8921 4.31616 1.75626 5.81973C1.65651 6.92379 1.5625 8.39058 1.5625 10C1.5625 11.6094 1.65651 13.0762 1.75626 14.1803C1.8921 15.6838 3.07738 16.8436 4.5755 16.966C5.9136 17.0754 7.81674 17.1875 10 17.1875C12.1835 17.1875 14.0868 17.0754 15.4249 16.966C16.9228 16.8436 18.108 15.6841 18.2438 14.1807C18.3435 13.077 18.4375 11.6105 18.4375 10C18.4375 8.38948 18.3435 6.92296 18.2438 5.81931C18.108 4.31588 16.9228 3.15645 15.4249 3.03398C14.0868 2.92458 12.1835 2.8125 10 2.8125ZM12.1876 10.722C12.7431 10.4013 12.7431 9.59941 12.1876 9.27866L9.06133 7.47373C8.50577 7.15298 7.81133 7.55392 7.81133 8.19542V11.8053C7.81133 12.4468 8.50577 12.8477 9.06133 12.527L12.1876 10.722Z" fill="#9499A0"/></svg>${data.view}</span>
            <span><svg width="36" height="36" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg" class="icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.77234 30.8573V11.7471H7.54573C5.50932 11.7471 3.85742 13.3931 3.85742 15.425V27.1794C3.85742 29.2112 5.50932 30.8573 7.54573 30.8573H9.77234ZM11.9902 30.8573V11.7054C14.9897 10.627 16.6942 7.8853 17.1055 3.33591C17.2666 1.55463 18.9633 0.814421 20.5803 1.59505C22.1847 2.36964 23.243 4.32583 23.243 6.93947C23.243 8.50265 23.0478 10.1054 22.6582 11.7471H29.7324C31.7739 11.7471 33.4289 13.402 33.4289 15.4435C33.4289 15.7416 33.3928 16.0386 33.3215 16.328L30.9883 25.7957C30.2558 28.7683 27.5894 30.8573 24.528 30.8573H11.9911H11.9902Z"></path></svg>${data.like}</span>
            <span><svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="icon" style="fill:;"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.045 25.5454C7.69377 25.5454 2.54504 20.3967 2.54504 14.0454C2.54504 7.69413 7.69377 2.54541 14.045 2.54541C20.3963 2.54541 25.545 7.69413 25.545 14.0454C25.545 17.0954 24.3334 20.0205 22.1768 22.1771C20.0201 24.3338 17.095 25.5454 14.045 25.5454ZM9.66202 6.81624H18.2761C18.825 6.81624 19.27 7.22183 19.27 7.72216C19.27 8.22248 18.825 8.62807 18.2761 8.62807H14.95V10.2903C17.989 10.4444 20.3766 12.9487 20.3855 15.9916V17.1995C20.3854 17.6997 19.9799 18.1052 19.4796 18.1052C18.9793 18.1052 18.5738 17.6997 18.5737 17.1995V15.9916C18.5667 13.9478 16.9882 12.2535 14.95 12.1022V20.5574C14.95 21.0577 14.5444 21.4633 14.0441 21.4633C13.5437 21.4633 13.1382 21.0577 13.1382 20.5574V12.1022C11.1 12.2535 9.52148 13.9478 9.51448 15.9916V17.1995C9.5144 17.6997 9.10883 18.1052 8.60856 18.1052C8.1083 18.1052 7.70273 17.6997 7.70265 17.1995V15.9916C7.71158 12.9487 10.0992 10.4444 13.1382 10.2903V8.62807H9.66202C9.11309 8.62807 8.66809 8.22248 8.66809 7.72216C8.66809 7.22183 9.11309 6.81624 9.66202 6.81624Z"></path></svg>${data.coin}</span>
          </div>
          <div class="owner">
            <span class="tip">视频</span>
            <img src="${data.face + '&h=100'}" class="no-lazyload">
            <span>${data.owner}</span>
          </div>
        </div>
        `
      })
    }
  </script>
  
<h1 id="操作系统"><a href="#操作系统" class="headerlink" title="操作系统"></a>操作系统</h1><p><img src="https://myl-mdimg.oss-cn-beijing.aliyuncs.com/TyporaImg/image-20240415204817080.png" alt="image-20240415204817080"></p>
<ul>
<li><p>应用软件到计算机硬件的中间件  </p>
</li>
<li><p>管理硬件</p>
<ul>
<li>CPU管理</li>
<li>内存管理</li>
<li>终端管理</li>
<li>磁盘管理</li>
<li>文件管理</li>
<li>网络管理</li>
<li>多核管理</li>
<li>电源管理</li>
</ul>
</li>
<li><p>冯 诺伊曼存储程序思想</p>
<ul>
<li><p>将程序和数存放到计算机内部的存储器中，计算机在程序的控制下一步一步处理</p>
<p><img src="https://myl-mdimg.oss-cn-beijing.aliyuncs.com/TyporaImg/image-20240408200356742.png" alt="image-20240408200356742" style="zoom:67%;"></p>
</li>
</ul>
</li>
<li><p>操作系统的启动</p>
<ul>
<li>引导扇区：512字节，启动设备的第一个扇区，启动设备信息被设置在其中<ul>
<li>其中的代码是汇编代码（更好的控制内存）</li>
<li>引导扇区代码：bootsect.s</li>
</ul>
</li>
</ul>
</li>
<li><p>操作系统接口</p>
<ul>
<li>表现为函数调用，又由系统提供，所以称为<strong>系统调用</strong></li>
</ul>
</li>
<li><p>系统调用的实现</p>
<ul>
<li><p>用户态：不能访问内核空间数据</p>
</li>
<li><p>内核态：可以访问任何数据</p>
</li>
<li><p>如何分离：CPL DPL越小表示权限越高</p>
<ul>
<li>内核 DPL = 0</li>
<li>用户 CPL = 3</li>
<li>CPL &lt;= DPL方可调用，所以一般用户态无法访问内核态</li>
</ul>
</li>
<li><p>如何切换：中断（唯一方法）int 0x80</p>
<p><img src="https://myl-mdimg.oss-cn-beijing.aliyuncs.com/TyporaImg/image-20240408204828529.png" alt="image-20240408204828529"></p>
</li>
<li><p>完整过程</p>
<p><img src="C:\Users\H\AppData\Roaming\Typora\typora-user-images\image-20240408205211541.png" alt="image-20240408205211541" style="zoom:67%;"></p>
<ul>
<li>开始判断用户态CPL=3  &gt;  内核 DPL= 0，不能直接访问，走系统调用</li>
<li>根据系统调用号(exa=72)发送 int 0x80指令到达系统（因为_system_call的DPL=3，故可以调用）</li>
<li>当调用_system_call后CPL置为0，此时再访问内核就可以了</li>
</ul>
</li>
</ul>
</li>
<li><p>系统调用核心：</p>
<ul>
<li>用户程序中包含一段<strong>int指令</strong>代码</li>
<li>操作系统写<strong>中断处理</strong>，获取想调程序的编号</li>
<li>操作系统更具编号执行相应代码</li>
</ul>
</li>
</ul>
<h2 id="一-CPU管理"><a href="#一-CPU管理" class="headerlink" title="一 CPU管理"></a>一 CPU管理</h2><ul>
<li>CPU工作原理<ul>
<li>自动的取指-执行：从指定的地址中取出指令执行</li>
<li>只需要设置要PC初值即可，后续可以不断的自动取指执行</li>
</ul>
</li>
<li><p>并发：一个CPU上交替执行多个程序（为了提高利用率）</p>
</li>
<li><p><strong>线程</strong>切换</p>
<ul>
<li>需要 记录线程切换出去时候的信息？用<strong>进程</strong>来描述</li>
</ul>
</li>
</ul>
<h3 id="1-1-多进程图像"><a href="#1-1-多进程图像" class="headerlink" title="1.1 多进程图像"></a>1.1 多进程图像</h3><ul>
<li><p>开机的时候<code>fork()</code>了第一个进程，随后每执行一个子任务，<code>fork()</code>新的进程</p>
</li>
<li><p><code>PCB(Process Control Block)</code>：用来记录进程信息的数据结构</p>
</li>
<li><p><code>TCB(Thread Control Block)</code>：用来记录线程信息的数据结构</p>
</li>
<li><p>进程状态</p>
<ul>
<li>新建态</li>
<li>就绪态</li>
<li>运行态</li>
<li>阻塞态</li>
<li>终止态</li>
</ul>
<p><img src="https://myl-mdimg.oss-cn-beijing.aliyuncs.com/TyporaImg/image-20240408214304327.png" alt="image-20240408214304327" style="zoom:67%;"></p>
</li>
<li><p>进程队列</p>
<ul>
<li>就绪队列</li>
<li>阻塞队列</li>
</ul>
</li>
<li><p>多进程组织：PCB + 状态 + 队列</p>
</li>
<li><p>多进程如何交替</p>
<ul>
<li>进程A启动磁盘读写</li>
<li>修改进程A状态为阻塞态</li>
<li>将进程A放入阻塞队列</li>
<li><code>schedule()</code>：进行上下文切换<ul>
<li><code>getNext()</code>：在就绪队列中找到下一个进程B（线程的调度）</li>
<li><code>switch_to()</code>：<ul>
<li>CPU中的信息保存在进程A对应的PCB中，方便下次恢复</li>
<li>读取进程B中的PCB信息，恢复信息</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="1-2-用户级线程"><a href="#1-2-用户级线程" class="headerlink" title="1.2 用户级线程"></a>1.2 用户级线程</h3><ul>
<li>进程 = 一个资源 + 多个指令执行序列</li>
<li>多个进程共享资源，可以保留并发的特点，且避免了进程切换的代价</li>
<li>一个线程一个栈</li>
<li><code>yield()</code>：线程的切换<ul>
<li>将当前线程的下一条指令压入栈中（方便后续返回时读取到命令）</li>
<li>切换TCB</li>
<li>根据TCB来切换栈</li>
<li>PC切换（从栈从弹出PC指针）</li>
<li>执行新的线程</li>
</ul>
</li>
<li><code>create()</code>：生成新的线程<ul>
<li>申请内存生成栈</li>
<li>申请内存生成TCB，关联TCB和栈</li>
<li>将第一条命令放到栈中</li>
</ul>
</li>
</ul>
<h3 id="1-3-内核级线程"><a href="#1-3-内核级线程" class="headerlink" title="1.3 内核级线程"></a>1.3 内核级线程</h3><ul>
<li><p>用户级线程：每个线程每个栈</p>
</li>
<li><p>内核级线程：因为既要在用户态跑又要在内核态跑，所以有两套栈（内核栈，用户栈）</p>
</li>
<li><p>切换<code>switch_to()</code>：</p>
<ul>
<li><p>首先线程A从用户态A1<strong>中断</strong>进入内核态A2</p>
</li>
<li><p>根据内核态A2的TCB找到切换的线程B的内核态B2的TCB</p>
</li>
<li><p>然后再根据B2通过<code>iret</code><strong>中断返回</strong>得到线程B的用户态B1 </p>
<p><img src="https://myl-mdimg.oss-cn-beijing.aliyuncs.com/TyporaImg/image-20240409210815697.png" alt="image-20240409210815697" style="zoom: 50%;"></p>
</li>
</ul>
</li>
<li><p>初始化<code>ThreadCreate()</code></p>
<ul>
<li>申请内存空间</li>
<li>创建TCB<ul>
<li>创建内核栈、用户栈</li>
</ul>
</li>
<li>关联栈和TCB</li>
</ul>
</li>
</ul>
<h3 id="1-4-用户级、核心级线程对比"><a href="#1-4-用户级、核心级线程对比" class="headerlink" title="1.4 用户级、核心级线程对比"></a>1.4 用户级、核心级线程对比</h3><p><img src="https://myl-mdimg.oss-cn-beijing.aliyuncs.com/TyporaImg/image-20240409210345072.png" alt="image-20240409210345072" style="zoom:67%;"></p>
<h3 id="1-5-CPU调度策略"><a href="#1-5-CPU调度策略" class="headerlink" title="1.5 CPU调度策略"></a>1.5 CPU调度策略</h3><ul>
<li><p>进程阻塞的时候调用<code>Schedule()</code>函数获取下一个可执行的进程</p>
</li>
<li><p>IO约束型任务（前台进程特征，这类的优先级应该高一点）和CPU约束型任务</p>
</li>
<li>调度算法：<ul>
<li>FCFS：先来先服务</li>
<li>SJF：短作业优先</li>
<li>RR：时间片轮转（保证响应时间）</li>
</ul>
</li>
</ul>
<h3 id="1-6-进程同步与信号量"><a href="#1-6-进程同步与信号量" class="headerlink" title="1.6 进程同步与信号量"></a>1.6 进程同步与信号量</h3><ul>
<li><p>进程同步：让进程走走停停保证多进程合作</p>
</li>
<li><p>信号量：用来解决只发送信号来实现同步的不足，更全面的表达进程的信息</p>
<ul>
<li><p>记录有多少进程睡眠和唤醒</p>
<p><img src="https://myl-mdimg.oss-cn-beijing.aliyuncs.com/TyporaImg/image-20240409220845574.png" alt="image-20240409220845574" style="zoom:67%;"></p>
</li>
<li><p>和信号的区别：信号只有1和0两个状态，信号量可以有多个状态</p>
</li>
<li><p>eg：一个资源数量是8，对应的信号量是2，则表示当前有2个资源可以使用，如果是-2则表示有两个进程等待这个资源</p>
</li>
</ul>
</li>
<li><p>信号量解决生产者消费者问题案例</p>
<ul>
<li>生产者停的条件：缓冲区满</li>
<li>消费者停的条件：缓冲区空</li>
<li>信号量：缓冲区当前大小，初始为buffer_size</li>
<li>双方在执行的时候判断信号量</li>
<li>注意：信号量是线程间<strong>互斥</strong>的资源（不能同时读写）</li>
</ul>
</li>
</ul>
<h3 id="1-7-信号量的临界区保护"><a href="#1-7-信号量的临界区保护" class="headerlink" title="1.7 信号量的临界区保护"></a>1.7 信号量的临界区保护</h3><ul>
<li>共同修改信号量会造成错误，因此需要保护</li>
<li><strong>临界区</strong>：一次只允许一个进程进入的该进程的那段代码</li>
<li>如何找到进程中的临界区代码：读写信号量的代码</li>
<li>基本原则：互斥</li>
<li>好的保护原则：有空让进；有限等待</li>
<li>常见方法：<ul>
<li>Peterson算法：结合了标记+轮转的算法</li>
<li>面包店算法</li>
</ul>
</li>
</ul>
<h3 id="1-8-死锁处理"><a href="#1-8-死锁处理" class="headerlink" title="1.8 死锁处理"></a>1.8 死锁处理</h3><ul>
<li>成因：<ul>
<li>互斥使用</li>
<li>不可抢占</li>
<li>请求和保持：进程必须占有资源再去申请新的资源</li>
<li>循环等待：在资源分配图中有环路</li>
</ul>
</li>
<li>死锁预防：破坏死锁出现的条件<ul>
<li>一次性申请所有需要的资源（资料浪费，编程难）</li>
<li>资源申请按序进行（资源浪费）</li>
</ul>
</li>
<li>死锁避免：检测每个资源请求，如果造成死锁就拒绝<ul>
<li>先试用在判断安全序列（算法时间复杂度高）</li>
</ul>
</li>
<li>死锁检测+恢复：检测到死锁的时候让进程回滚，让出资源<ul>
<li>（恢复困难）</li>
</ul>
</li>
<li>死锁忽略：等重启就解决了<ul>
<li>（用的多）</li>
</ul>
</li>
</ul>
<h2 id="二-内存管理"><a href="#二-内存管理" class="headerlink" title="二 内存管理"></a>二 内存管理</h2><h3 id="2-1-内存使用与分段"><a href="#2-1-内存使用与分段" class="headerlink" title="2.1 内存使用与分段"></a>2.1 内存使用与分段</h3><ul>
<li><p>重定位</p>
</li>
<li><p>交换</p>
<p><img src="https://myl-mdimg.oss-cn-beijing.aliyuncs.com/TyporaImg/image-20240410102659773.png" alt="image-20240410102659773" style="zoom:50%;"></p>
</li>
<li><p>使用过程</p>
<p><img src="https://myl-mdimg.oss-cn-beijing.aliyuncs.com/TyporaImg/image-20240410103406408.png" alt="image-20240410103406408" style="zoom:50%;"></p>
<ul>
<li>进程1申请到一段内存，PCB指向2000地址，进程2申请到另一端内存，PCB指向1000地址</li>
<li>当进程1执行的时候，PC指针取址100，放到CPU中</li>
<li>根据进程1的基地址(2000)得到进程1的代码地址2100</li>
<li>当需要切换到进程2的时候，先根据PCB切换到进程2的基地址1000 </li>
<li>执行进程2，PC指针继续取址执行</li>
</ul>
</li>
<li><p>内存分段：程序并不是整段放到内存中，分段放在不同的地方</p>
<ul>
<li><p>段+段内偏移</p>
</li>
<li><p>PCB中此时不只是一个基址了，而是每个段的基址（LDT表）</p>
<p><img src="https://myl-mdimg.oss-cn-beijing.aliyuncs.com/TyporaImg/image-20240410104432330.png" alt="image-20240410104432330" style="zoom:67%;"></p>
</li>
</ul>
</li>
</ul>
<h3 id="2-2-内存分区和分页"><a href="#2-2-内存分区和分页" class="headerlink" title="2.2 内存分区和分页"></a>2.2 内存分区和分页</h3><ul>
<li>内存分区<ul>
<li>可变分区：空闲分区表+已分配分区表</li>
<li>固定分区</li>
</ul>
</li>
<li>内存分区问题<ul>
<li>内存外碎片</li>
<li>如果需要内存紧缩的话就很耗时</li>
</ul>
</li>
<li>内存分页：<ul>
<li>会造成内碎片，但是可以根据页的大小来控制碎片的大小</li>
</ul>
</li>
</ul>
<h3 id="2-3-多级页表与块表"><a href="#2-3-多级页表与块表" class="headerlink" title="2.3 多级页表与块表"></a>2.3 多级页表与块表</h3><ul>
<li><p>问题：为提高内存利用率，页应该很小，但是页小了页表就大了</p>
</li>
<li><p>方法一：只存放用到的页</p>
<ul>
<li>带来的问题：页表中的页号不连续，需要比较、查找，线性的查找耗时</li>
</ul>
</li>
<li><p>方法二：<strong>多级页表</strong>：页目录表（章）+页表（节）</p>
<p><img src="https://myl-mdimg.oss-cn-beijing.aliyuncs.com/TyporaImg/image-20240410155109348.png" alt="image-20240410155109348" style="zoom: 67%;"></p>
<ul>
<li>空间利用率高，但是增加了访问的次数</li>
</ul>
</li>
<li><p><strong>块表</strong>：TLB，一组相联快速存储，是寄存器</p>
<ul>
<li>一次比对就可以找到（类似于书签，redis）</li>
<li>如果在块表中没有命中再查多级页表，然结果再放到TLB中</li>
<li>关键是提高TLB的命中率</li>
</ul>
</li>
</ul>
<h3 id="2-4-段页结合的内存管理"><a href="#2-4-段页结合的内存管理" class="headerlink" title="2.4 段页结合的内存管理"></a>2.4 段页结合的内存管理</h3><ul>
<li><p>程序员希望用段，物理内存希望用页</p>
</li>
<li><p>虚拟内存</p>
<p><img src="https://myl-mdimg.oss-cn-beijing.aliyuncs.com/TyporaImg/image-20240410161014066.png" alt="image-20240410161014066" style="zoom: 50%;"></p>
</li>
<li><p>对于用户来说是段式存储，对于物理内存来说是页式存储</p>
</li>
<li><p>根据段号得到一个基址(虚拟地址)，由基址得到一个页号，再根据页号查找页表得到真实的物理地址</p>
<p><img src="https://myl-mdimg.oss-cn-beijing.aliyuncs.com/TyporaImg/image-20240410161448350.png" alt="image-20240410161448350" style="zoom:50%;"></p>
</li>
</ul>
<h3 id="2-5-内存换入换出"><a href="#2-5-内存换入换出" class="headerlink" title="2.5 内存换入换出"></a>2.5 内存换入换出</h3><ul>
<li><p>用换入换出来实现“大内存”</p>
<ul>
<li>虚拟内存4G，实际内存1G，给用户一种4G的感觉</li>
</ul>
</li>
<li><p>换入：请求调页</p>
<ul>
<li>用户给一个基址，在虚拟内存中查发现物理地址中缺页，CPU从磁盘中载入相应资源到物理内存中</li>
</ul>
</li>
<li><p>换出：选择一页淘汰，换出到磁盘中</p>
<ul>
<li>FIFO</li>
<li>MIN</li>
<li><strong>LRU</strong></li>
</ul>
</li>
<li><p>LRU实现换出</p>
<ul>
<li><p>方法一：每页维护一个时间戳，淘汰最小的时间戳对应的页</p>
</li>
<li><p>方法二：维护一个页码栈，淘汰栈底 </p>
</li>
<li><p>方法三近似实现Clock算法：每个页加一个引用位，每访问一页，硬件自动设置该位1，淘汰时如果是1就置为0，如果是0就淘汰</p>
<p><img src="https://myl-mdimg.oss-cn-beijing.aliyuncs.com/TyporaImg/image-20240410164923481.png" alt="image-20240410164923481" style="zoom:67%;"></p>
</li>
<li><p>方法四Clock改进：两个扫描指针：一个用来清除R位，移动速度快；一个用来淘汰页，移动速度慢</p>
</li>
</ul>
</li>
<li><p>另一个问题：进程分配的页框</p>
<ul>
<li>太多了内存利用率不高</li>
<li>太少了导致缺页率高 ==&gt; 磁盘的换入换出频率高 ==&gt; 进程等待时间长，发生<strong>颠簸</strong></li>
</ul>
</li>
</ul>
<h2 id="三-磁盘、文件管理"><a href="#三-磁盘、文件管理" class="headerlink" title="三 磁盘、文件管理"></a>三 磁盘、文件管理</h2><h3 id="3-1-IO与显示器"><a href="#3-1-IO与显示器" class="headerlink" title="3.1 IO与显示器"></a>3.1 IO与显示器</h3><p><img src="https://myl-mdimg.oss-cn-beijing.aliyuncs.com/TyporaImg/image-20240415205054190.png" alt="image-20240415205054190" style="zoom:50%;"></p>
<ul>
<li><p>对外设的使用本质是向他们</p>
<ul>
<li>发送指令(<strong>out 指令</strong>)</li>
<li>将out指令做成接口（<strong>文件视图</strong>）</li>
<li>进行设备的<strong>中断处理</strong></li>
</ul>
</li>
<li><p>printf：先创建缓存buf将格式化都输出在那里，然后再write(1, buf, …)</p>
<ul>
<li>printf</li>
<li>系统调用(wirte)</li>
<li>字符设备接口(crw_table)</li>
<li>tty设备写(tty_wirte)</li>
<li>显示器写(con_wirte)</li>
</ul>
</li>
</ul>
<h3 id="3-2-键盘"><a href="#3-2-键盘" class="headerlink" title="3.2 键盘"></a>3.2 键盘</h3><p><img src="https://myl-mdimg.oss-cn-beijing.aliyuncs.com/TyporaImg/image-20240415214935201.png" alt="image-20240415214935201" style="zoom:67%;"></p>
<h3 id="3-3-生磁盘的使用"><a href="#3-3-生磁盘的使用" class="headerlink" title="3.3 生磁盘的使用"></a>3.3 生磁盘的使用</h3><ul>
<li>磁盘访问单位：扇区（512字节）<ul>
<li>升级到盘块，一次读取的内容变多，减少磁盘寻道(瓶颈)时间，用空间换时间</li>
</ul>
</li>
<li><p>只要往控制器中写柱面、磁头、扇区、缓存位置</p>
</li>
<li><p>过程</p>
<ul>
<li>进程得到盘块号，算出扇区号</li>
<li>用扇区号make req，用电梯算法add_request</li>
<li>进程sleep</li>
<li>磁盘中断处理</li>
<li>算出cyl,head,sector</li>
<li>调用outp()完成端口写</li>
</ul>
</li>
</ul>
<link rel="stylesheet" href="https://cdn1.tianli0.top/gh/zhheo/Post-Abstract-AI@0.15.2/tianli_gpt.css">

<script>
let tianliGPT_postSelector = '#post #article-container';
let tianliGPT_key = 'c9b7741d290063ab872e';
</script>
<script src="https://cdn1.tianli0.top/gh/zhheo/Post-Abstract-AI@0.15.2/tianli_gpt.js"></script>



</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://yileman.github.io">myl</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://yileman.github.io/posts/1079.html">http://yileman.github.io/posts/1079.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://yileman.github.io" target="_blank">myl's blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%9F%BA%E7%A1%80/">基础</a></div><div class="post_share"><div class="social-share" data-image="https://myl-mdimg.oss-cn-beijing.aliyuncs.com/TyporaImg/cover/article_cover10.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer=""></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/28758.html" title="计算机网络"><img class="cover" src="https://myl-mdimg.oss-cn-beijing.aliyuncs.com/TyporaImg/cover/article_cover9.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">计算机网络</div></div></a></div><div class="next-post pull-right"><a href="/posts/56035.html" title="实习"><img class="cover" src="https://myl-mdimg.oss-cn-beijing.aliyuncs.com/defaultArticleCover.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">实习</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/28758.html" title="计算机网络"><img class="cover" src="https://myl-mdimg.oss-cn-beijing.aliyuncs.com/TyporaImg/cover/article_cover9.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-04-18</div><div class="title">计算机网络</div></div></a></div></div></div><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://myl-mdimg.oss-cn-beijing.aliyuncs.com/touxiang.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"></div><div class="author-info__name">myl</div><div class="author-info__description">后端学习</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">22</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/yileman"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">写写记记</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.</span> <span class="toc-text">操作系统</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-CPU%E7%AE%A1%E7%90%86"><span class="toc-number">1.1.</span> <span class="toc-text">一 CPU管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%9B%BE%E5%83%8F"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1 多进程图像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E7%94%A8%E6%88%B7%E7%BA%A7%E7%BA%BF%E7%A8%8B"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2 用户级线程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E5%86%85%E6%A0%B8%E7%BA%A7%E7%BA%BF%E7%A8%8B"><span class="toc-number">1.1.3.</span> <span class="toc-text">1.3 内核级线程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-%E7%94%A8%E6%88%B7%E7%BA%A7%E3%80%81%E6%A0%B8%E5%BF%83%E7%BA%A7%E7%BA%BF%E7%A8%8B%E5%AF%B9%E6%AF%94"><span class="toc-number">1.1.4.</span> <span class="toc-text">1.4 用户级、核心级线程对比</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-CPU%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5"><span class="toc-number">1.1.5.</span> <span class="toc-text">1.5 CPU调度策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-%E8%BF%9B%E7%A8%8B%E5%90%8C%E6%AD%A5%E4%B8%8E%E4%BF%A1%E5%8F%B7%E9%87%8F"><span class="toc-number">1.1.6.</span> <span class="toc-text">1.6 进程同步与信号量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-%E4%BF%A1%E5%8F%B7%E9%87%8F%E7%9A%84%E4%B8%B4%E7%95%8C%E5%8C%BA%E4%BF%9D%E6%8A%A4"><span class="toc-number">1.1.7.</span> <span class="toc-text">1.7 信号量的临界区保护</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-8-%E6%AD%BB%E9%94%81%E5%A4%84%E7%90%86"><span class="toc-number">1.1.8.</span> <span class="toc-text">1.8 死锁处理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86"><span class="toc-number">1.2.</span> <span class="toc-text">二 内存管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%86%85%E5%AD%98%E4%BD%BF%E7%94%A8%E4%B8%8E%E5%88%86%E6%AE%B5"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 内存使用与分段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%86%85%E5%AD%98%E5%88%86%E5%8C%BA%E5%92%8C%E5%88%86%E9%A1%B5"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2 内存分区和分页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E5%A4%9A%E7%BA%A7%E9%A1%B5%E8%A1%A8%E4%B8%8E%E5%9D%97%E8%A1%A8"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.3 多级页表与块表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E6%AE%B5%E9%A1%B5%E7%BB%93%E5%90%88%E7%9A%84%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86"><span class="toc-number">1.2.4.</span> <span class="toc-text">2.4 段页结合的内存管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-%E5%86%85%E5%AD%98%E6%8D%A2%E5%85%A5%E6%8D%A2%E5%87%BA"><span class="toc-number">1.2.5.</span> <span class="toc-text">2.5 内存换入换出</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89-%E7%A3%81%E7%9B%98%E3%80%81%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86"><span class="toc-number">1.3.</span> <span class="toc-text">三 磁盘、文件管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-IO%E4%B8%8E%E6%98%BE%E7%A4%BA%E5%99%A8"><span class="toc-number">1.3.1.</span> <span class="toc-text">3.1 IO与显示器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E9%94%AE%E7%9B%98"><span class="toc-number">1.3.2.</span> <span class="toc-text">3.2 键盘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E7%94%9F%E7%A3%81%E7%9B%98%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.3 生磁盘的使用</span></a></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">©2024 By myl</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(() => {
  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://comments.manyile.top/',
      region: 'ap-shanghai',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://comments.manyile.top/',
      region: 'ap-shanghai',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))

    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(init,0)
    else getScript('https://cdn.jsdelivr.net/npm/twikoo@1.6.31/dist/twikoo.all.min.js').then(init)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script type="text/javascript" src="https://unpkg.zhimg.com/jquery@latest/dist/jquery.min.js"></script><script data-pjax="" type="text/javascript" src="/js/nav.js"></script><div class="aplayer no-destroy" data-id="2664875269" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listfolded="false" data-order="random" data-preload="none" data-autoplay="false" muted=""></div><script data-pjax="" type="text/javascript" src="/js/randomPaper.js"></script><script type="text/javascript" src="/js/rightMenu.js"></script><script>let tianliGPT_postSelector = '\#post \#article-container';let tianliGPT_key = 'c9b7741d290063ab872e';</script><script src="https://cdn1.tianli0.top/gh/zhheo/Post-Abstract-AI@0.15.2/tianli_gpt.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async="" data-pjax="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div><div class="js-pjax" id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();"><i class="fa fa-arrow-left"></i></a><a class="rightMenu-item" href="javascript:window.history.forward();"><i class="fa fa-arrow-right"></i></a><a class="rightMenu-item" href="javascript:window.location.reload();"><i class="fa fa-refresh"></i></a><a class="rightMenu-item" href="javascript:rmf.scrollToTop();"><i class="fa fa-arrow-up"></i></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><i class="fa fa-copy"></i><span>复制</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.baidu.com/s?wd=&quot;+window.getSelection().toString());window.location.reload();"><i class="iconfont icon-baidu"></i><span>百度搜索</span></a><a class="rightMenu-item" href="javascript:rmf.searchinThisPage();"><i class="fas fa-search"></i><span>站内搜索</span></a><a class="rightMenu-item" href="#post-comment" onclick="rmf.yinyong()"><i class="fa-solid fa-message"></i><span>引用文本评论</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-too"><a class="rightMenu-item" href="javascript:window.open(window.getSelection().toString());window.location.reload();"><i class="fa fa-link"></i><span>转到链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-paste"><a class="rightMenu-item" href="javascript:rmf.paste()"><i class="fa fa-copy"></i><span>粘贴</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-post"><a class="rightMenu-item" href="#post-comment"><i class="fas fa-comment"></i><span>空降评论</span></a><a class="rightMenu-item" href="javascript:switchCommentBarrage()"><i class="iconfont icon-danmu"></i><span>开/关评论弹幕</span></a><a class="rightMenu-item" href="javascript:rmf.copyWordsLink()"><i class="fa fa-link"></i><span>复制本文地址</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>新窗口打开</span></a><a class="rightMenu-item" id="menu-too" href="javascript:rmf.open()"><i class="fa fa-link"></i><span>转到链接</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>复制链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="javascript:rmf.saveAs()"><i class="fa fa-download"></i><span>保存图片</span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>在新窗口打开</span></a><a class="rightMenu-item" href="javascript:rmf.click()"><i class="fa fa-arrows-alt"></i><span>全屏显示</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>复制图片链接</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:randomPost()"><i class="fa fa-paper-plane"></i><span>随便逛逛</span></a><a class="rightMenu-item" href="javascript:rmf.switchDarkMode();"><i class="fa fa-moon"></i><span>昼夜切换</span></a><a class="rightMenu-item" href="javascript:rmf.switchReadMode();"><i class="fa fa-book"></i><span>阅读模式</span></a><a class="rightMenu-item" href="javascript:fullScreen();"><i class="fas fa-expand"></i><span>进入全屏</span></a></div></div><!-- hexo injector body_end start --><script data-pjax="">function electric_clock_injector_config(){
                var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
                var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img id="card-clock-loading" src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-clock/clock/images/weather/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading" class="entered loading"></div></div></div></div></div>';
                console.log('已挂载electric_clock')
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // 有报错，但不影响使用(支持pjax跳转)
            }if( document.getElementsByClassName('sticky_layout')[0] && (location.pathname ==='all'|| 'all' ==='all')){

            electric_clock_injector_config()
        } </script><script src="https://pv.sohu.com/cityjson?ie=utf-8"></script><script data-pjax="" src="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.js"></script><script async="" src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><!-- hexo injector body_end end --></body></html>